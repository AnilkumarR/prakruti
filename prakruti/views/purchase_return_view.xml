<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
        <!--     Search View for Purchase Return-->
        <record model="ir.ui.view" id="view_prakruti_purchase_return_search">
            <field name="name">Purchase Return</field>
            <field name="model">prakruti.purchase_return</field>
            <field name="arch" type="xml">
                <search string="Purchase Return">
                    <field name="product_id"/>
                    <field name ="mrn_no"/>
                    <field name ="mrn_date"/>
                    <field name ="po_no"/>
                    <field name ="order_date"  />
                    <field name ="grn_id"/>
                    <field name ="grn_date"  />
                    <field name ="vendor_id"  />
                    <field name ="status"/>
                </search>
            </field>
        </record>
        
        
        <!--     Tree View for Purchase Return-->
        <record model="ir.ui.view" id="view_purchase_return_tree">
            <field name="name">Purchase Return</field>
            <field name="model">prakruti.purchase_return</field>
            <field name="arch" type="xml">
                <tree string="Purchase Return" create= "false" delete="false" edit="false">
                    <field name ="mrn_no"/>
                    <field name ="mrn_date"/>
                    <field name ="po_no"/>
                    <field name ="order_date"  />
                    <field name ="grn_id"/>
                    <field name ="grn_date"  />
                    <field name ="vendor_id"  />
                    <field name ="status"/>
                </tree>
            </field>
        </record>
        
        <!--     Form View for Purchase Return-->
        <record model="ir.ui.view" id="view_purchase_return_form">
            <field name="name">Purchase Return</field>
            <field name="model">prakruti.purchase_return</field>
            <field name="arch" type="xml">
                <form string="Purchase Return" create= "false" delete="false">
                    <sheet> 
                        <header>
                            <button name="debit_note" string="Raise Debit Note" type="object" attrs="{'invisible':[('status','=','debit_note')]}"/>
                            <field name ='status' widget="statusbar"/>           
                        </header>
                        <group string = "Purchase Return"/>
                        <group colspan="2" col="6"> 
                            <field name ='mrn_no' />
                            <field name ="mrn_date"/>
                            <field name ="po_no"  />
                            <field name ="order_date"  />
                            <field name ="grn_id"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                            <field name ="grn_date"  />
                            <field name ='company_address'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                            <field name ="vendor_id" domain="[ ('supplier','=',True)]" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                            <field name ="categorization" />
                            <field name ="grn_no" invisible = "1"/>
                        </group>
                        <notebook>
                            <page string='Product Details'>
                                <field name='return_line' widget= 'one2many_list' attrs="{'readonly':[('status','!=','draft')]}">
                                    <tree editable='bottom' create= "false" delete="false">
                                        <field name="product_id"/>
                                        <field name="description"  />
                                        <field name="uom_id" />
                                        <field name="unit_price"/>
                                        <field name="no_of_packings"  />
                                        <field name="pack_per_qty"  />
                                        <field name="extra_packing"  />
                                        <field name="quantity"  />
                                        <field name="return_qty"/>
                                        <field name="remarks"/>
                                    </tree>
                                </field>
                            </page>
                            <page string="Other Details">
                                <group>
                                    <field name="revision_no" />
                                    <field name="document_no" />
                                    <field name='stores_incharge' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                    <field name ="plant_manager" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  />
                                    <field name ="to_name" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  />
                                    <field name ="default_pr_date"  />
                                    <field name ="purchase_manager" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                </group>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!--     Pivot View for Purchase Return-->
        <record model="ir.ui.view" id="view_prakruti_purchase_return_pivot">
            <field name="name">Purchase Return</field>
            <field name="model">prakruti.purchase_return</field>
            <field name="arch" type="xml">
                <pivot string="Purchase Return" display_quantity="True">
                    <field name="po_no" type="row"/>
                    <field name="vendor_id"/>
                </pivot>
            </field>
        </record>
        
        <!--     Action for Purchase Return-->
        <record model="ir.actions.act_window" id="purchase_return_action">
            <field name="name">Purchase Return</field>
            <field name="res_model">prakruti.purchase_return</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,pivot</field>
        </record>
        
        <!--     Menu for Purchase Return-->
        <menuitem 
            name="Purchase Return" 
            id="prakruti_purchase_return_1"
            action="purchase_return_action" 
            sequence="9"
            parent="prakruti.prakruti_purchase_main_sub_menu"  groups="prakruti.group_prakruti_purchase_return_read_only,prakruti.group_prakruti_purchase_return_edit,prakruti.group_prakruti_purchase_return_create,prakruti.group_prakruti_purchase_return_delete"/>
    </data>
</openerp>