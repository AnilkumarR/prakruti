<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
        <!--      Search view for Sales Quotation    -->
        <record model="ir.ui.view" id="view_prakruti_sales_inquiry_search">
            <field name="name">Sales Inquiry Search</field>
            <field name="model">prakruti.sales_inquiry</field>
            <field name="arch" type="xml">
                <search string="Product Wise Search">
                    <field name="product_id"/>
                    <field name='inquiry_no'/>
                    <field name='customer_id'/>
                    <field name='requested_id'/>
                    <field name="state"/>
                </search>
            </field>
        </record>
        
    <!--     Tree view for Sales Quotation  -->
     <record model="ir.ui.view" id="view_prakruti_sales_inquiry_tree">
         <field name="model">prakruti.sales_inquiry</field>
         <field name="arch" type="xml">
             <tree string="Sales Inquiry Information" colors="orange:state =='partially_confirmed';brown:state =='production_slip_confirmed';red:state =='rejected';green:state =='confirm';violet:state =='partial_order';">
                 <field name='inquiry_no'/>
                 <field name='inquiry_date'/>
                 <field name='customer_id'/>
                 <field name='requested_id'/>
                 <field name="state"/>
             </tree>
         </field>
     </record>
     
    <!--     Tree view for Sales Quotation     -->
     <record model="ir.ui.view" id="view_prakruti_sales_inquiry_form">
         <field name="name">prakruti.sales_inquiry.form</field>
         <field name="model">prakruti.sales_inquiry</field>
         <field name="arch" type="xml">
         <form string="Sales Inquiry Information">
             <header position="inside">
                 <button name="action_to_quotation" string="To Quotation" type="object" attrs="{'invisible':[('state', 'not in', ('inquiry'))]}"/>
                 <field name='state' widget='statusbar'/>
               <!-- <button name="print_inquiry" string="Print" type="object" states="inquiry" class="btn-primary"/>
                <button name="print_inquiry" string="Print" type="object" states="quotation,prakruti,sales"/>-->
             </header>
             <group string = 'Sales Inquiry'/>
             <button name="revise_inquiry" string="Is Revision Required ?" type="object" class="oe_highlight" attrs="{'invisible':['|',('state', 'not in',('inquiry')),('revise_status', 'in', ('revise_inquiry'))]}"/>                                         
             <button name="revise_done" string="Revise Done" type="object" class="oe_highlight" attrs="{'invisible':[('revise_status', 'not in', ('revise_inquiry'))]}"/>
             <field name='revise_status' widget='statusbar' attrs="{'invisible':[('is_revise', '=', False)]}"/>
             <group colspan="2" col="6">
                 <field name ="is_revise" attrs="{'invisible':[('is_revise', '=', False)]}"/>
                 <field name ="revise_no" attrs="{'invisible':[('is_revise', '=', False)]}"/>
                 <field name="revise_flag" invisible="True"/>
             </group>
             <group>
                 <field name='inq_no' invisible="True"/>
                 <field name='auto_no' invisible="True"/>
                 <field name='req_no_control_id1' invisible="True"/>
             </group>
             <group>
                 <group colspan="2" col="6">
                     <field name='inquiry_date' attrs="{'readonly':[('state', 'not in', ('inquiry'))]}"/>
                     <field name='requested_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                     <field name='shipping_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state', 'not in', ('inquiry')),('revise_status', 'not in', ('revise_inquiry'))]}"/>  
                     <field name='product_type_id' domain="[('id','=',(5,6))]"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state', 'not in', ('inquiry'))]}"/>
                     <field name="company_address" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                     <field name='inquiry_no'/>
                     <field name='customer_id' domain="[('customer','=',True)]"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state', 'not in', ('inquiry')),('revise_status', 'not in', ('revise_inquiry'))]}"/>
                     <field name='billing_id'   options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state', 'not in', ('inquiry')),('revise_status', 'not in', ('revise_inquiry'))]}"/> 
                  </group>
                 <notebook colspan="2">
                     <page  string="Product Details">
                         <field name='grid_id' attrs="{'readonly':[('state', 'not in', ('inquiry')),('revise_status', 'not in', ('revise_inquiry'))]}" />
                     </page>
                    <page string="Others">
                        <group colspan="2" cols="6">
                            <field name='terms_id' attrs="{'readonly':[('state', 'not in', ('inquiry'))]}"/> 
                            <field name='reference_no' attrs="{'readonly':[('state', 'not in', ('inquiry'))]}"/> 
                            <field name='reference_date' attrs="{'readonly':[('state', 'not in', ('inquiry'))]}"/>
                            <field name='revision_no' attrs="{'readonly':[('state', 'not in', ('inquiry'))]}"/>
                            <field name="remarks" attrs="{'readonly':[('state', 'not in', ('inquiry'))]}"/>
                            <field name ="revise_remarks" placeholder='Enter Revise Remarks Here...' attrs="{'invisible': [('is_revise', '=', False)]}"/>
                            <field name ="revise_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'invisible': [('is_revise', '=', False)]}"/>
                            <field name ="revise_remarks_update" />
                         </group>
                     </page>
                  </notebook>
                </group>
             </form>
         </field>
     </record>
     
    <!--  Tree view for sales Inquiry Item     -->
     <record model="ir.ui.view" id="view_prakruti_sales_inquiry_item_tree">
         <field name="name">prakruti.sales_inquiry_item.tree</field>
         <field name="model">prakruti.sales_inquiry_item</field>
         <field name="arch" type="xml">
             <tree string="Prakruti Sales Inquiry Item " editable="bottom" >
                 <field name='serial_number' invisible="True"/>
                 <field name='serial_no'/>
                 <field name="product_id" on_change="onchange_product(product_id)" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="[ ('group_ref','=',parent.product_type_id)]"/>
                 <field name="uom_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                 <field name="description" />
                 <field name="specification_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="['&amp;',('product_id','=',product_id),'|',('specification_sale_status','=',True),('common_specification','=',True)]" />
                 <field name="material_type" invisible="True"/>
                 <field name="quantity" />
                 <field name="remarks" />
                 <field name="sale_price" invisible="True"/>
                 <field name='actual_unit_price' invisible="True"/>
                 <field name='hsn_code' invisible="True"/>
                 <field name="main_id" invisible="True"/>
             </tree>
         </field>
     </record>
    
    <!--    Pivot view      -->
    <record model="ir.ui.view" id="view_prakruti_sales_inquiry_pivot">
        <field name="name">prakruti.sales_inquiry.pivot</field>
        <field name="model">prakruti.sales_inquiry</field>
        <field name="arch" type="xml">
            <pivot string=" Sales Inquiry" display_quantity="True">
                <field name="requested_id" type="row"/>
                <field name='customer_id'/>
            </pivot>
        </field>
    </record>

     <!-- Action View for sales Inquiry      -->
     <record model="ir.actions.act_window" id="prakruti_sales_inquiry_action">
         <field name="name">Sales Inquiry</field>
         <field name="res_model">prakruti.sales_inquiry</field>
         <field name="view_type">form</field>
         <field name="domain">[('revise_flag','=',0)]</field>
         <field name="view_mode">tree,form,pivot</field>
     </record>
	
     <menuitem id="prakruti_sales_main_menu" 
               name="Sales" 
               sequence="5"  
               web_icon="prakruti,static/src/img/icons/SALES2.jpg"/>
     <menuitem id="prakruti_sales_main_sub_menu" 
               name="Sales" 
               parent="prakruti_sales_main_menu" 
               sequence="1"/>
     <menuitem name="Sales Inquiry" 
               id="prakruti_sales_inquiry_menu" 
               action="prakruti_sales_inquiry_action" 
               sequence="1" 
               parent="prakruti_sales_main_sub_menu" 
               groups="prakruti.group_prakruti_sales_inquiry_read_only,prakruti.group_prakruti_sales_inquiry_edit,prakruti.group_prakruti_sales_inquiry_create,prakruti.group_prakruti_sales_inquiry_delete"/>
     
</data>
</openerp>
