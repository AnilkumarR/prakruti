<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
        <!--Search view for Gate Pass          -->
        <record model="ir.ui.view" id="view_prakruti_gate_pass_search">
            <field name="name"> Gate Pass Search</field>
            <field name="model">prakruti.gate_pass</field>
            <field name="arch" type="xml">
                <search string="Search">
                     <field name="product_id"/>
                     <field name='pass_no' />
                     <field name='pass_date'/>
                     <field name='vehicle_no'/>
                     <field name='document_type'/>
                     <field name='vendor_id'/>
                     <field name='customer_id'/>
                     <field name='state'/>
                     <field name='coming_from'/>
                </search>
            </field>
        </record>
        
        <!--  Tree view for Gate Pass           -->
        <record model="ir.ui.view" id="view_prakruti_gate_pass_tree">
            <field name="name"> Gate Pass</field>
            <field name="model">prakruti.gate_pass</field>
            <field name="arch" type="xml">
                <tree string=" Gate Pass" create= "false">
                     <field name='pass_no' />
                     <field name='pass_date'/>
                     <field name='vehicle_no'/>
                     <field name='document_type'/>
                     <field name='order_no' string="Sales Order No"/>
                     <field name='po_no' string="Purchase Order No"/>
                     <field name='vendor_id'/>
                     <field name='customer_id'/>
                     <field name='state'/>
                </tree>
            </field>
        </record>
        
        <!-- Form view for Gate Pass            -->
        <record model="ir.ui.view" id="view_prakruti_gate_pass_form">
            <field name="name"> Gate Pass</field>
            <field name="model">prakruti.gate_pass</field>
            <field name="arch" type="xml">
                <form string=" Gate Pass" create= "false">
                    <header>
                        <button name= 'action_checked_incoming_sales_grn' string="SALES(RETURN) INWARD" type="object" attrs="{'invisible':['|',('coming_from', 'not in', 'sales_return'),('state', 'in', ('inward_done','outward_done'))]}"/>
                        <button name= 'action_checked_incoming' string="PURCHASE INWARD" type="object" attrs="{'invisible':['|',('coming_from', 'not in', 'purchase'),('state', 'in', ('inward_done','outward_done'))]}"/>
                        <button name= 'action_checked_outgoing' string="SALES OUTWARD" type="object" attrs="{'invisible':['|',('coming_from', 'not in', 'sales'),('state', 'in', ('inward_done','outward_done'))]}"/>
                        <button name= 'action_purchase_return_outward' string="PURCHASE(RETURN) OUTWARD" type="object" attrs="{'invisible':['|',('coming_from', 'not in', 'purchase_return'),('state', 'in', ('inward_done','outward_done'))]}"/>
                    </header>
                    <group string="Order Details" colspan="2" col="6">
                        <field name='pass_no' />
                        <field name='pass_date' attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                        <field name='coming_from'/>
                        <field name='document_type' />
                        <field name='vehicle_no' />
                        <field name='company_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                        <field name='state'/>
                        <field name='reference_no' readonly="True"/> 
                    </group>  
                    <group string="Vendor Details" colspan="2" col="6" attrs="{'invisible':[('coming_from', 'not in', ['purchase','purchase_return'])]}">
                        <field name='vendor_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'invisible':[('coming_from', 'not in', ['purchase_return','purchase'])]}"/>
                        <field name="vendor_accepted_delivery_date"/> 
                        <field name="actual_date" />
                        <field name='po_no' attrs="{'invisible':[('coming_from', 'in', ['purchase_return'])]}"/>
                        <field name='order_date' attrs="{'invisible':[('coming_from', 'in', ['purchase_return'])]}"/>
                    </group>
                    <group string="Customer Details" colspan="2" col="6" attrs="{'invisible':[('coming_from', 'not in', ('sales','sales_return'))]}">
                        <field name='dispatch_no'/>
                        <field name='dispatch_date'/>
                        <field name='invoice_no' />             
                        <field name='invoice_date' /> 
                        <field name='customer_id'   options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                        <field name='order_no'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                        <field name='sales_order_date'  />
                        <field name ="categorization" readonly="True"/>
                    </group>
                    <group colspan="2" cols="6">
                        <field name="purchase_type" invisible="True"/>                              
                        <field name='pr_no' invisible= "True"/>
                        <field name='qa_no' invisible= "True"/>
                        <field name='qo_no' invisible= "True"/>
                        <field name='req_no' invisible= "True"/>
                        <field name="request_date" invisible= "True"/>
                        <field name='vendor_reference' invisible= "True"/>
                        <field name='dispatch_through' invisible= "True"/>
                        <field name='amount_untaxed' invisible= "True"/> 
                        <field name='frieght_charges_applied' invisible= "True"/>
                        <field name='frieght_charges' invisible= "True"/>  
                        <field name='packing_charges' invisible= "True"/>  
                        <field name='additional_charges' invisible= "True"/>
                        <field name="excise_id" invisible= "True"/>
                        <field name='excise_duty' invisible= "True"/>
                        <field name='total_discount' invisible= "True"/>
                        <field name='total_tax' invisible= "True"/>
                        <field name='total_excise_duty' invisible= "True"/>
                        <field name='grand_total' invisible= "True"/>
                        <field name="payment" invisible= "True"/>                                     
                        <field name='destination' invisible= "True"/>
                        <field name='other_reference' invisible= "True"/>
                        <field name="maintanence_manager" invisible= "True"/>                                   
                        <field name="purchase_manager" invisible= "True"/>
                        <field name="stores_incharge" invisible="True"/>
                        <field name='terms_of_delivery' invisible= "True"/>
                        <field name='gp_no' invisible="True"/>
                        <field name='auto_no' invisible="True"/>
                        <field name='req_no_control_id' invisible="True"/>
                        <field name='order_close_flag' invisible="True"/>
                        <field name='order_close_pending' invisible="True"/>                 
                        <field name='dispatch_id'  invisible="True"/>
                        <field name='order_id'   invisible="True"/>
                        <field name='requested_id'   invisible="True"/>
                        <field name='quotation_id'   invisible="True"/>
                    </group>
                    <notebook>
                        <page string="Product Info.">
                            <field name='grid_id' widget= 'one2many_list' attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                        </page>
                        <page string="Other Details">
                            <group  colspan="2" col="6">
                                <field name="time" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="security_id" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="plant_incharge" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="transport_name" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="driver_name" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="entry_no" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="document_no" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name ="plant_manager" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name ="to_name" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name ="default_pr_date" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="rev_no" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="date" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="remarks" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                <field name="terms" attrs="{'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                            </group>
                            <group string= "CheckList">
                                <group colspan="4" col="4" >
                                    <field name='invoice_no_check' widget='radio' options="{'horizontal': true}" attrs="{'invisible':[('coming_from', 'not in', ('purchase','sales_return'))],'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                    <field name='dc_no_inward_check' widget='radio' options="{'horizontal': true}" attrs="{'invisible':[('coming_from', 'not in', ('purchase','sales_return'))],'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                    <field name='mod_vat_copy_collected_check'  invisible="1"/>
                                    <field name='po_no_check' invisible="1" />
                                    <field name='does_lr_copy_received_check' widget='radio'  options="{'horizontal': true}" attrs="{'invisible':[('coming_from', 'not in', ('purchase','sales_return'))],'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                </group>
                                <group colspan="4" col="4" > 
                                    <field name='dc_no_outward_check' widget='radio' options="{'horizontal': true}" attrs="{'invisible':[('coming_from', 'not in', 'sales')],'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                    <field name='e_way_bill_check' widget='radio' options="{'horizontal': true}" attrs="{'invisible':[('coming_from', 'not in', 'sales')],'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                    <field name='customer_road_permit' widget='radio'  options="{'horizontal': true}" attrs="{'invisible':[('coming_from', 'not in', 'sales')],'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                    <field name='coa' invisible="1"/>
                                    <field name='job_work_documents' widget='radio' options="{'horizontal': true}" attrs="{'invisible':[('coming_from', 'not in', 'sales')],'readonly':[('state', 'in', ('inward_done','outward_done'))]}"/>
                                    <field name='job_work_documents_remarks'  attrs="{'invisible':['|',('coming_from', 'in', 'purchase'),('job_work_documents','in','not_applicable')]}"/>
                                 </group>
                                 <group colspan="4" col="4" >
                                     <field name='completed_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                     <field name='completed_date' />
                                 </group>
                                 <group string= "Revised Remards">
                                     <field name= 'revise_remarks_update'/>
                                 </group>
                            </group>  
                        </page>
                        <page string="Payment Details" invisible= "True">
                            <group>
                                <group colspan="2" col="6">
                                    <field name='any_adv_payment'/>
                                    <field name='advance_payment_type' />
                                    <group string="Cash Details" >
                                        <field name='cash_amount' />
                                        <field name='cash_remarks' />
                                    </group>
                                    <group string="Cheque Details" >
                                        <field name='cheque_amount' />
                                        <field name='cheque_no' />
                                        <field name='cheque_remarks' />
                                    </group>
                                    <group string="Draft Details" >
                                        <field name='draft_amount' />
                                        <field name='draft_no' />
                                        <field name='draft_remarks' />
                                    </group>
                                </group>
                            </group>
                        </page> 
                    </notebook>
                </form>
            </field>
        </record>
        
        
    <!--  Tree view for Gate Pass Line     -->
     <record model="ir.ui.view" id="view_prakruti_gate_pass_line_tree">
         <field name="name">prakruti.gate_pass_line.tree</field>
         <field name="model">prakruti.gate_pass_line</field>
         <field name="arch" type="xml">
             <tree string="Gate Pass Line " editable='bottom' create= "false" delete= "false">
                <field name="product_id" readonly="True"/>
                <field name="quantity" readonly="True"/>
                <field name="no_of_packings" attrs="{'readonly':[('checked_flag', '=', 1)]}"/>
                <field name="pack_per_qty" attrs="{'readonly':[('checked_flag', '=', 1)]}"/>
                <field name="extra_packing" attrs="{'readonly':[('checked_flag', '=', 1)]}"/>
                <field name="recieved_qty"/>
                <field name='balance_qty'/>
                <field name="packing_details" attrs="{'readonly':[('checked_flag', '=', 1)]}"/>
                <field name='checked_status' />
                <field name="expected_date" />
                <field name="vendor_accepted_delivery_date" />
                <field name="actual_date" />
                <field name='checked_flag' invisible = "1"/>
                <field name="status" invisible="True"/>
                <field name="purchase_line_common_id" invisible= "True"/>  
                <field name="description" invisible="True"/>
                <field name="uom_id" invisible="True"/>
                <field name="remarks" attrs="{'readonly':[('checked_flag', '=', 1)]}"/>
            </tree>
         </field>
     </record>
     
        <!--   Pivot  for Gate Pass          -->
        <record model="ir.ui.view" id="view_prakruti_gate_pass_pivot">
            <field name="name">prakruti.gate_pass.pivot</field>
            <field name="model">prakruti.gate_pass</field>
            <field name="arch" type="xml">
                <pivot string="Gate Pass" display_quantity="True">
                    <field name="vendor_id" type="row"/>
                    <field name="customer_id"/>
                    <field name="state"/>
                </pivot>
            </field>
        </record>
        
        <!--  Action  for Gate Pass           -->
        <record model="ir.actions.act_window" id="prakruti_gate_pass_action">
            <field name="name"> Gate Pass</field>
            <field name="res_model">prakruti.gate_pass</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,pivot</field>
        </record>
        
        <menuitem name="Gate Pass" 
                  id="prakruti_gate_pass_main_sub_menu" 
                  parent="prakruti_logistics_po_tracking_main_menu"/>
        <menuitem name="Material Gate Pass" 
                  id="prakruti_gate_pass_sub_menu"
                  parent="prakruti_gate_pass_main_sub_menu" 
                  action="prakruti_gate_pass_action"
                  sequence="3"  groups="group_prakruti_gate_pass_read_only,group_prakruti_gate_pass_edit,group_prakruti_gate_pass_create,group_prakruti_gate_pass_delete"/>
    
    </data>
</openerp>
