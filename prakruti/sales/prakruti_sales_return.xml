<?xml version="1.0" encoding="utf-8"?>
<openerp>
 <data>
        <!--  Search View for Sales Return        -->
        <record model="ir.ui.view" id="view_prakruti_sales_return_search">
            <field name="name">prakruti.sales_return.search</field>
            <field name="model">prakruti.sales_return</field>
            <field name="arch" type="xml">
                <search string="Product Wise Search">
                    <field name="product_id"/>
                    <field name="return_type"/>
                    <field name="return_no"/>
                    <field name='order_no' />
                    <field name='dispatch_to' />
                    <field name='company_id' />
                    <field name='state' />
                </search>
            </field>
        </record>
        
        <!-- Tree View for Sales Return         -->
        <record model="ir.ui.view" id="view_prakruti_sales_return_tree">
            <field name="name">prakruti.sales_return.tree</field>
            <field name="model">prakruti.sales_return</field>
            <field name="arch" type="xml">
                <tree string="Sales Return "  >
                    <field name="return_type"/>
                    <field name="return_no"/>
                    <field name="return_date"/>
                    <field name='order_no' />
                    <field name='order_date' />
                    <field name='dispatch_to' />
                    <field name='company_id' />
                    <field name='state' />
                </tree>
            </field>
        </record>
        
    <!-- Form View for Sales Return          -->
    <record model="ir.ui.view" id="view_prakruti_sales_return_form">
        <field name="name">prakruti.sales_return.form</field>
        <field name="model">prakruti.sales_return</field>
        <field name="arch" type="xml">
            <form string="Sales Return"  create= "false" >
            <header position="inside">
                <button name="return_to_grn" string="GRN" type="object" attrs="{'invisible':[('state', 'in', ('grn'))]}"/>
                <field name='state' widget='statusbar'/>    
            </header>
            <group colspan="4" col="4">
                <field name="return_type"/>
                <field name="return_no" readonly="True"/>
                <field name="return_date"/>
                <field name='invoice_no' attrs="{'readonly':[('state', 'in', ('grn','return'))],'invisible':[('return_type','not in','return_by_customer')]}" readonly="True"/>
                <field name='invoice_date' attrs="{'readonly':[('state', 'in', ('grn','return'))],'invisible':[('return_type','not in','return_by_customer')]}" readonly="True"/>
                <field name='dispatch_no'  on_change="onchange_dispatch_no(dispatch_no)" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"   attrs="{'readonly':[('state', 'in', ('grn','return'))],'invisible':[('return_type','not in','from_dispatch')]}"/>
                <field name='dispatch_date'  attrs="{'readonly':[('state', 'in', ('grn','return'))],'invisible':[('return_type','not in','from_dispatch')]}" />
                <field name='order_no'  attrs="{'readonly':[('state', 'in', ('grn','return'))]}" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                <field name='order_date'  attrs="{'readonly':[('state', 'in', ('grn','return'))]}" />
                <field name='dispatch_to' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  attrs="{'readonly':[('state', 'in', ('grn','return'))]}" />
                <field name='company_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  attrs="{'readonly':[('state', 'in', ('grn','return'))]}" />
                <field name='reference_no' />
                <field name='reference_date' /> 
                <field name='revision_no' />     
                <field name='terms' />           
                <field name='flag_count_accept' invisible= "True"/>
                <field name= "product_type_id" invisible= "True"/>
                <field name='return_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'invisible':[('return_type','not in','from_dispatch')]}"/>
                <field name='dispatch_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="True" />
                <field name='order_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="True"/>
                <field name='requested_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="True"/>
                <field name='quotation_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="True"/>
            </group>      
            <group>
                <field name='ret_no' invisible="True"/>
                <field name='auto_no' invisible="True"/>
                <field name='req_no_control_id1' invisible="True"/>                            
            </group>
            <button name="action_list_products"  string="List" type="object" attrs="{'invisible':['|',('state', 'in', ('grn','return')),('return_type','not in','return_by_customer'),('flag_count_accept','=',2)]}"/>                 
            <button name="action_delete_products"  string="Delete" type="object" attrs="{'invisible':[('return_type','not in','return_by_customer')]}"/>                 
            <notebook> 
                <page  string="Product Details" >
                    <field name='grid_id' attrs="{'readonly':[('state', 'in', ('grn','return'))]}"/>
                </page>
                <page string="Remarks">
                    <field name="remarks"/> 
                </page>
            </notebook>
        </form>
    </field>
</record>
        
        
        
    <!--  Tree view for Sales Return Items     -->
     <record model="ir.ui.view" id="view_prakruti_sales_return_items_tree">
         <field name="name">prakruti.sales_return_items.tree</field>
         <field name="model">prakruti.sales_return_items</field>
         <field name="arch" type="xml">
             <tree string="Sales Returns" editable='top' create="false" delete="false">
                 <field name="product_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}"/>
                 <field name="uom_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}"/>
                 <field name="description"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}"/>
                 <field name="specification_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}"/>
                 <field name="material_type"  invisible="True" />
                 <field name="batch_no"  />
                 <field name="ordered_qty"   attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}"/>
                 <field name="scheduled_date"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}" invisible="True"/>
                 <field name="scheduled_qty"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}" invisible="True"/>
                 <field name="dispatched_qty"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}" invisible="True"/>
                 <field name="accepted_qty" invisible="True"/>
                 <field name="unit_price" invisible="True"/>
                 <field name="rejected_qty"  attrs="{'readonly':[('state', 'in', ('grn','return'))]}"/>
                 <field name="status"  attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}"/>
                 <field name="remarks"  attrs="{'readonly':[('state', 'in', ('grn','return'))]}"/>
                 <field name="state" attrs="{'readonly':[('state', 'in', ('grn','return','draft'))]}" invisible="True"/>
                 <field name="return_type" invisible="True" />
             </tree>
         </field>
     </record>
     
    <!--Pivot view for Sales Return        -->
     <record model="ir.ui.view" id="view_prakruti_sales_return_pivot">
            <field name="name">prakruti.sales_return.pivot</field>
            <field name="model">prakruti.sales_return</field>
            <field name="arch" type="xml">
                <pivot string="Sales Return Items " display_quantity="True">
                    <field name="dispatch_to" type="row"/>
                    <field name="return_id"/>
                    <field name='state'/>    
                </pivot>
            </field>
        </record>
        
        <!-- Action for Sales Return          -->
        <record model="ir.actions.act_window" id="prakruti_sales_return_action">
            <field name="name">Sales Return </field>
            <field name="res_model">prakruti.sales_return</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,pivot</field>
        </record>
        
        <menuitem name="Sales Return" 
                  id="prakruti_sales_return_menu" 
                  action="prakruti_sales_return_action" 
                  sequence="6" 
                  parent="prakruti_sales_main_sub_menu"
                  groups="prakruti.group_prakruti_sales_return_read_only,prakruti.group_prakruti_sales_return_edit,prakruti.group_prakruti_sales_return_create,prakruti.group_prakruti_sales_return_delete"/>
</data>
</openerp>
