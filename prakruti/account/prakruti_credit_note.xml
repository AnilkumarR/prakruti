<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
        <!-- Tree view for Credit note         -->
        <record id="view_prakruti_credit_note_tree" model="ir.ui.view">
            <field name="name">Credit Note Tree</field>
            <field name="model">prakruti.credit.note</field>
            <field name="arch" type="xml">
                <tree string="Credit Note">
                    <field name="credit_note_no"/>
                    <field name="credit_date"/>
                    <field name="sales_return_id"/>
                    <field name="customer_id"/>
                    <field name="company_id" />
                    <field name="subtotal"/>
                   
                </tree>
            </field>
        </record>
        <!-- Form view for Credit note         -->
        <record id="view_prakruti_credit_note_form" model="ir.ui.view">
            <field name="name">Credit Note Form</field>
            <field name="model">prakruti.credit.note</field>
            <field name="arch" type="xml">
                <form string="Credit Note">
             <header>
                       <button  name="send_mail_quotation" string="Send By Mail" type="object"  default_focus="1" class="oe_highlight"/>
                </header>
                    <sheet>
                        <group invisible="True">
                            <field name='cdt_no'/>  
                            <field name='auto_no'/> 
                            <field name='req_no_control_id'/>
                        </group>
                        <field name='flag_count_accept' invisible= "True"/>
                        <div class="oe_title">
                            <label for="sales_return_id" string="Select Return No:"/>
                            <h1><field name="sales_return_id" placeholder="Select Here" on_change="onchange_sales_return_id(sales_return_id)" options="{'no_open': True, 'no_create': True}"/></h1>
                        </div>
                        <group string="Information" colspan="2" col="4">
                            <field name="credit_note_no"/>
                            <field name="credit_date"/>
                            <field name="company_id" readonly="True"/>
                            <field name="customer_id" options="{'no_open': True, 'no_create': True}"/>
                            <field name='dispatch_to' options="{'no_open': True, 'no_create': True}" />
                        </group>
                        <button name="action_list_products"  string="List" type="object" attrs="{'invisible':[('flag_count_accept','=',2)]}"/>
                        <button name="action_delete_products"  string="Delete" type="object" />
                        <notebook>
                            <page string="Product Info.">
                                <field name="order_line"/>
                                <group>
                                    <group class="oe_subtotal_footer oe_right">
                                        <field name='subtotal'/>
                                    </group>
                                </group>
                            </page>
                            <page string="Other Details">
                                <field name="notes"/>
                            </page>
                        </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        <!-- Tree view for Credit note  Line       -->
        <record id="view_prakruti_credit_note_line_tree" model="ir.ui.view">
            <field name="name">Credit Note Tree</field>
            <field name="model">prakruti.credit.note.line</field>
            <field name="arch" type="xml">
                <tree editable='bottom' create= "false" delete="false">
                    <field name="product_id" options='{"no_open": True, "no_create": True}' />
                    <field name="uom_id" options='{"no_open": True, "no_create": True}'/>
                    <field name="rejected_qty"/>
                    <field name="unit_price"/>
                    <field name='total'/>
                </tree>     
            </field>
        </record>
        
        <!-- Pivot view for Credit note         -->
        <record model="ir.ui.view" id="view_prakruti_credit_note_pivot">
            <field name="name">prakruti.credit.note.pivot</field>
            <field name="model">prakruti.credit.note</field>
            <field name="arch" type="xml">
                <pivot string=" Credit Note " display_quantity="True">
                    <field name="customer_id" type="row"/>
                    <field name="sales_return_id"/>
                </pivot>
            </field>
        </record>
        <!-- Action view for Credit note         -->
        <record id="action_prakruti_credit_note_form" model="ir.actions.act_window">
            <field name="name">Credit Note</field>
            <field name="res_model">prakruti.credit.note</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,pivot</field>
        </record>
        
        
        <menuitem id="prakruti_credit_note_main_menu" 
                  name="Accounts" 
                  sequence="9"  
                  web_icon="prakruti,static/src/img/icons/accounts.jpg"/>
        <menuitem id="prakruti_credit_note_main_sub_menu" 
                  name="Accounts" 
                  parent="prakruti_credit_note_main_menu"/>
        <menuitem  name="Credit Note" 
                   action="action_prakruti_credit_note_form" 
                   id="menu_action_credit_note_form_1" 
                   parent="prakruti_credit_note_main_sub_menu" 
                   sequence="1" 
                   groups="group_prakruti_credit_note_read_only,group_prakruti_credit_note_edit,group_prakruti_credit_note_create,group_prakruti_credit_note_delete"/>
        
    </data>
</openerp>