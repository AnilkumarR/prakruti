<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
        
         <!-- Search view for Tablet -->
        <record model="ir.ui.view" id="view_prakruti_tablet_search">
            <field name="name">prakruti.tablet.search</field>
            <field name="model">prakruti.tablet</field>
            <field name="arch" type="xml">
                <search string="Tablet BOM Search">
                    <field name ="company_id"  />
                    <field name ="subplant_id"  />
                    <field name ='batch_no' />
                    <field name="date"/>
                    <field name='state'/>
                </search>
            </field>
        </record>
        
        
        <!-- Tree view for Tablet -->
        <record model="ir.ui.view" id="view_prakruti_tablet_tree">
            <field name="name">Tablet BOM</field>
            <field name="model">prakruti.tablet</field>
            <field name="arch" type="xml">
                <tree string="Tablet BOM">
                    <field name ="company_id"  />
                    <field name ="subplant_id"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                    <field name ='batch_no' />
                    <field name="date"/>
                    <field name='state'/>
                    <field name ="is_duplicate"/>
                </tree>
            </field>
        </record>  
        
        <!-- Tree view for Tablet          -->
        <record model="ir.ui.view" id="view_prakruti_tablet_form">
            <field name="name">Tablet BOM</field>
            <field name="model">prakruti.tablet</field>
            <field name="arch" type="xml">
                <form string="Tablet BOM">
                    <header>
                        <field name ='state' widget='statusbar' style="font-size:10px;"/>                        
                    </header>
                    <footer>
                        <button name ='request_to_stores' string="Material Request" type="object" class="oe_highlight" attrs="{'invisible':[('state', 'not in', ('draft'))]}"/>
                        
                        <button name ='request_packing_material_issue' string="Packing Material Request" type="object" class="oe_highlight" attrs="{'invisible':[('packing_material_request_flag','in',(0,2))]}"/>
                        
                        <button name ='request_to_stores_for_extra_issue' string="Issue Extra Raw Material" type="object" class="oe_highlight" attrs="{'invisible':[('state', 'in', ('draft','packing_request','sent_stores','extra_issue','extra_packing_issue'))]}"/>
                        
                        <button name ='request_to_stores_for_extra_issue_packing' string="Issue Extra Packing" type="object" class="oe_highlight"  attrs="{'invisible':['|',('state', 'in', ('draft','sent_stores','extra_issue','packing_request','extra_packing_issue','issued_quant')),('packing_material_request_flag','=',1)]}"/>
                        <button name ='return_to_stores' string="Return to issue" type="object" class="oe_highlight" attrs="{'invisible':[('state', 'in', ('draft','sent_stores'))]}"/>
                        <button name ='packing_return_to_stores' string="Return Packing Material to issue" type="object" class="oe_highlight" attrs="{'invisible':[('state', 'in', ('draft','sent_stores','issued_quant','packing_request'))]}"/>
                            
                        <button name='duplicate_bom' string="Duplicate" type="object" class="oe_highlight" attrs="{'invisible':[('is_duplicate', '=', True)]}"/>
                    </footer>
                    <group>
                        <group> 
                            <field name ="packing_material_request_flag" invisible="True"/>
                            <field name ="existing_batch_no" invisible="True"/>
                            <field name ="readonly_flag" invisible="True"/>                             
                            <field name ="duplicate_flag" invisible="True"/>
                            <field name ="flag_count" invisible="True"/>                 
                            <field name ="flag_display_product" invisible="True"/>                             
                            <field name ="flag_delete_product" invisible="True"/>                 
                            <field name ="flag_display_product1" invisible="True"/>                             
                            <field name ="flag_delete_product1" invisible="True"/>
                        </group>
                        <group string="Tablet BOM" colspan="2" col="6">
                            <field name ="is_duplicate"/>
                            <field name ="company_id"  readonly="True"/>
                            <field name ="subplant_id" on_change="onchange_subplant_id(subplant_id)" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="[('plant_type','=','tablet')]" style="color: red; font-weight: bold;" attrs="{'readonly':[('readonly_flag', '=', 1)]}"/>
                            <field name='batch_no'  on_change="onchange_batch_id(batch_no)" domain="['&amp;',('plant_type','=','tablet'),('subplant_id','=',subplant_id)]" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('readonly_flag', '=', 1)]}"/>
                            <field name='std_batch_size_id' domain="[ ('subplant_id','=',subplant_id)]" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('readonly_flag', '=', 1)]}"/>
                            <field name='actual_batch_size' attrs="{'readonly':[('readonly_flag', '=', 1)]}"/> 
                            <field name ="date" attrs="{'readonly':[('readonly_flag', '=', 1)]}"/>
                            <field name ="assay_per" attrs="{'readonly':[('readonly_flag', '=', 1)]}"/>
                            <field name ='label_claim' attrs="{'readonly':[('readonly_flag', '=', 1)]}"/>
                            <field name ='dept_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('readonly_flag', '=', 1)]}"/>
                            </group>
                        </group>
                    <notebook>
                        <page string='Product Details'>
                            <div>
                                <button name="action_list_products"  string="List" type="object" attrs="{'invisible':[('flag_display_product','=',1),('flag_delete_product','=',0)]}"/>
                                <button name="action_delete_products"  string="Delete" type="object" attrs="{'invisible':[('flag_delete_product','=',1),('flag_display_product','=',0)]}"/>
                            </div>  
                                <button name="action_tablet_product_id"  string="Add" type="object" />
                            <field name='grid_id'>
                                <tree editable='bottom' create='false'>
                                    <field name='product_id' on_change="onchange_product_id(product_id)" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('readonly_grid', '=', 1)]}"/>
                                    <field name='description' attrs="{'readonly':[('readonly_grid', '=', 1)]}"/>
                                    <field name='uom_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('readonly_grid', '=', 1)]}"/>
                                    <field name='ar_no' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="[ ('product_id','=',product_id)]"/>
                                    <field name='grn_no' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="1"/>
                                    <field name='grn_list' />
                                    <field name='std_wgt'/>
                                    <field name='composition'/>
                                    <field name='material_weight'/>
                                    <field name='actual_weight' attrs="{'readonly':[('readonly_grid', '=', 1)]}"/>
                                    <field name='extra_qty' attrs="{'readonly':[('extra_flag', '=', 0)]}"/>
                                    <field name='issued_weight' readonly="True" />
                                    <field name='weight_return' />
                                    <field name='extra_issued_qty' readonly="True"/>
                                    <field name='weighed_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                    <field name='checked_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                    <field name='extra_flag' invisible="True"/>
                                    <field name='readonly_grid' invisible="True"/>
                                    <field name='issue_common_id' invisible="True"/>
                                </tree>
                            </field> 
                        </page>
                        <page string='Packing Details'>
                            <div>
                                <button name="action_list_packing_products"  string="List" type="object" attrs="{'invisible':[('flag_display_product1','=',1),('flag_delete_product1','=',0)]}"/>
                                <button name="action_delete_packing_products"  string="Delete" type="object" attrs="{'invisible':[('flag_delete_product1','=',1),('flag_display_product1','=',0)]}"/>
                            </div>  
                                <button name="action_tablet_packing_product_id"  string="Add" type="object" />
                            <field name='grid_id1'>
                                <tree editable='bottom' create='false'>
                                    <field name='product_id'  on_change="onchange_product_id(product_id)" domain="[('group_ref','=',(3,24))]" attrs="{'readonly':[('readonly_grid', '=', 1)]}" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                    <field name='description' attrs="{'readonly':[('readonly_grid', '=', 1)]}"/>
                                    <field name='uom_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('readonly_grid', '=', 1)]}"/>
                                    <field name='ar_no' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="[ ('product_id','=',product_id)]"/>
                                    <field name='grn_no' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="1"/>
                                    <field name='grn_list' />
                                    <field name='std_wgt'/>
                                    <field name='composition'/>
                                    <field name='extra_no_of_packing'/>
                                    <field name='extra_issued_weight' invisible="True"/>
                                    <field name='material_weight'/>
                                    <field name='actual_weight' attrs="{'readonly':[('readonly_grid', '=', 1)]}"/>
                                    <field name='extra_qty' attrs="{'readonly':[('extra_flag', '=', 0)]}"/>
                                    <field name='issued_weight' readonly="True" />
                                    <field name='weight_returned' />
                                    <field name='extra_issued_qty' readonly="True" />
                                    <field name='extra_issued_packing' invisible="True" />
                                    <field name='weighed_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                    <field name='checked_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                    <field name='extra_flag' invisible="True"/>
                                    <field name='readonly_grid' invisible="True"/>
                                    <field name='issue_common_id' invisible="True"/>
                                </tree>
                            </field> 
                        </page> 
                        <page  string="Product Wise GRN List">
                            <field name='grn_line'>
                                <tree string="Product Wise GRN List" editable='bottom' create="false">
                                    <field name="product_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                    <field name="grn_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                    <field name="received_qty"/>
                                    <field name="packing_style"/>
                                    <field name='packing_per_qty'/>
                                    <field name="extra_issued_packing" />
                                    <field name='issued_qty'/>
                                    <field name='extra_issued_qty'/>
                                    <field name="remarks" />
                                </tree>
                            </field>
                        </page>
                        <page string='Other Details'>
                            <group string = 'Other Information'/>
                            <group colspan="2" col="6">
                                <field name= "material_issued_by" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name= 'material_checked_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name= 'material_recieved_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                <field name= 'material_requested_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name= "mrn_no"/>
                                <field name= 'mrn_date_time' />
                                <field name ="revise_remarks_update" readonly="True"/> 
                            </group>
                        </page>
                </notebook>
            </form>
        </field>
    </record>
         <!-- Pivot for Tablet -->
     <record model="ir.ui.view" id="view_prakruti_tablet_pivot">
            <field name="name">prakruti.tablet.pivot</field>
            <field name="model">prakruti.tablet</field>
            <field name="arch" type="xml">
                <pivot string=" tablet" display_quantity="True">
                    <field name="subplant_id" type="row"/>
                    <field name ='batch_no' />
                    <field name='state'/>
                </pivot>
            </field>
        </record>
        
            <!-- Action for Tablet -->
        <record model="ir.actions.act_window" id="prakruti_tablet_action">
            <field name="name">Tablet BOM</field>
            <field name="res_model">prakruti.tablet</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,pivot</field>
        </record>
        
       
        
        <menuitem name="Tablet BOM" 
                  id="prakruti_tablet_menu" 
                  action="prakruti_tablet_action" 
                  sequence='3'
                  parent="prakruti_production_planning_menu" groups="group_prakruti_tablet_read_only,group_prakruti_tablet_edit,group_prakruti_tablet_create,group_prakruti_tablet_delete"/>
        
    </data>
</openerp>