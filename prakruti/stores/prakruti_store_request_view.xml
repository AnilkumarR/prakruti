<?xml version="1.0" encoding="utf-8"?>
<openerp>
 <data>
        
        <record model="ir.ui.view" id="view_prakruti_store_request_search">
            <field name="name">prakruti.store_request.search</field>
            <field name="model">prakruti.store_request</field>
            <field name="arch" type="xml">
                <search string="Search">
                    <field name="product_id"/>                
                    <field name="store_request_no"/>
                    <field name="request_date"/>
                    <field name='requested_by' />
                    <field name='coming_from'/>
                    <field name='batch_no' />
                    <field name='subplant_id' />
                    <field name='state'/>
                </search>
            </field>
        </record>
        
     <record model="ir.ui.view" id="view_prakruti_store_request_pivot">
            <field name="name">prakruti.store_request.pivot</field>
            <field name="model">prakruti.store_request</field>
            <field name="arch" type="xml">
                <pivot string="Store Request" display_quantity="True">
                    <field name="state" type="row"/>
                    <field name="requested_by"/>
                </pivot>
            </field>
        </record>
        
        
        <record model="ir.ui.view" id="view_prakruti_store_request_form">
            <field name="name">prakruti.store_request.form</field>
            <field name="model">prakruti.store_request</field>
            <field name="arch" type="xml">
                <form string="Store Request">
                         <header>                   
                             <button name="action_to_approve" string="To Approve" type="object" attrs="{'invisible':['|',('coming_from', 'in', ('Tablet BOM','Syrup BOM','Extraction BOM','Powder BOM')),('state','not in',('request'))]}"/>                   
                             <!--<button name="action_to_issue" string="To Issue" type="object" attrs="{'invisible':['|',('coming_from', 'in', ('Tablet BOM','Syrup BOM','Extraction BOM','Powder BOM')),('state','not in',('request'))]}"/>-->
                             <field name='state' widget='statusbar'/>
                         </header>
                         
                        <group>
                            <group colspan="2" col="6">
                                <field name='store_request_no' readonly="True"/>
                                <field name='request_date' readonly="True"/>
                                <field name='location_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                <field name='coming_from' />
                                <field name='dept_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name='company_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name='requested_by'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                <field name='batch_no' attrs="{'invisible':[('coming_from', 'not in', ('Tablet BOM','Syrup BOM','Extraction BOM','Powder BOM'))]}"/>
                                <field name='subplant_id' attrs="{'invisible':[('coming_from', 'not in', ('Tablet BOM','Syrup BOM','Extraction BOM','Powder BOM'))]}"/>
                             </group>
                             <group>
                                <field name='req_no' invisible="True"/>
                                <field name='auto_no' invisible="True"/>
                                <field name='req_no_control_id' invisible="True"/>
                                <field name="extraction_bom_id" invisible="True"/>
                                <field name="powder_bom_id" invisible="True"/>
                                <field name="syrup_bom_id" invisible="True"/>
                                <field name="tablet_bom_id" invisible="True"/>                                
                                <field name="syrup_packing_bom_id" invisible="True"/>
                                <field name="tablet_packing_bom_id" invisible="True"/>
                                <field name="powder_packing_bom_id" invisible="True"/>
                             </group>
                              <notebook colspan="2"> 
                                <page  string="Product Details">                   
                                    <button name="check_stock" string="Check Stock" type="object" />
                                    <field name='grid_id' attrs="{'readonly':['|',('coming_from', 'in', ('Tablet BOM','Syrup BOM','Extraction BOM','Powder BOM')),('state','not in',('request'))]}"/>
                                </page>
                                <page string="Other Details">
                                    <group colspan="2" col="6">
                                        <field name='store_incharge' style="width:30%%"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                        <field name='plant_incharge' style="width:30%%"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                        <field name='doc_no' style="width:30%%"/>
                                        <field name='date' style="width:30%%"/>
                                        <field name='production_incharge' style="width:30%%"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                        <field name ="revise_remarks_update" readonly="True"/>
                                    </group>
                                </page>
                            </notebook>
                        </group>
                </form>
            </field>
        </record>
    
     
        <!-- Tree view of  store  request Information -->
        <record model="ir.ui.view" id="view_prakruti_store_request_tree">
            <field name="name">prakruti.store_request.tree</field>
            <field name="model">prakruti.store_request</field>
            <field name="arch" type="xml">
                <tree string="Store Request">                   
                   <field name="store_request_no"/>
                    <field name="request_date"/>
                    <field name='requested_by' />
                    <field name='coming_from'/>
                   <field name='batch_no' />
                   <field name='subplant_id' />
                    <field name='state'/>
                </tree>
            </field>
        </record>
	
        
        
         <record model="ir.ui.view" id="view_prakruti_store_request_item_tree">
            <field name="name">prakruti.store_request_item.tree</field>
            <field name="model">prakruti.store_request_item</field>
            <field name="arch" type="xml">
                <tree string="Store Request" editable='bottom'>
                    <field name="product_id" on_change="onchange_product(product_id)" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                    <field name="uom_id"  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                    <field name="description" />
                    <field name="grn_no" invisible="True"/>
                    <field name='ar_no' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="[ ('product_id','=',product_id)]" invisible="True"/>
                    <field name="store_qty"/>
                    <field name="requested_quantity" />
                    <field name="extra_issued_qty" invisible="True"/>
                    <field name="extra_issued_packing" invisible="True"/>
                    <field name="remarks" />
                    <field name="grid_common_id" invisible="True"/>
                    <field name="extra_readonly_flag" invisible="True"/>
                    <field name="main_id" invisible="True"/>
                </tree>
            </field>
        </record>
        
        
        

        <!-- Action for  store  request Information -->
        <record model="ir.actions.act_window" id="prakruti_store_request_action">
            <field name="name">Store Request</field>
            <field name="res_model">prakruti.store_request</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,pivot</field>
        </record>
	
	
         <menuitem id="prakruti_stores_main_menu" name="Inventory" sequence="3" web_icon="prakruti,static/src/img/icons/inventory.png"/>
       
        <menuitem id="prakruti_sotres_main_sub_menu" name="Stores"
                  parent="prakruti_stores_main_menu"  sequence="1"/>
        
        
        <menuitem name="Material Request " id="prakruti_store_request_menu"
            action="prakruti_store_request_action" sequence="1"
                  parent="prakruti_sotres_main_sub_menu"
                  groups="group_prakruti_store_request_read_only,group_prakruti_store_request_edit,group_prakruti_store_request_create,group_prakruti_store_request_delete"/>

      
   

</data>
</openerp>
