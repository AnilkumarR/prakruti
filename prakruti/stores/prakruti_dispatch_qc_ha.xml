<?xml version="1.0" encoding="utf-8"?>
<openerp>
    <data>
      <!--   Search view for Quality Check HA       -->
        <record model="ir.ui.view" id="view_prakruti_quality_check_ha_search">
            <field name="name">prakruti.quality_check_ha.search</field>
            <field name="model">prakruti.quality_check_ha</field>
            <field name="arch" type="xml">
                <search string="Product Wise Search">
                    <field name="product_id"/>
                    <field name="dispatch_no"/>
                    <field name='checked_by'/>
                    <field name='quality_incharge'/>
                    <field name='state'/>
                </search>
            </field>
        </record>
        <!--  Tree view for Quality Check HA        -->
        <record model="ir.ui.view" id="view_prakruti_quality_check_ha_tree">
            <field name="name">Quality Check HA</field>
            <field name="model">prakruti.quality_check_ha</field>
            <field name="arch" type="xml">
                <tree string="Quality Check HA" create= "false">
                    <field name="qc_date" />
                    <field name="dispatch_no"/>
                    <field name="dispatch_date"/>
                    <field name='checked_by'/>
                    <field name='quality_incharge'/>
                    <field name='state'/>
                </tree>
            </field>
        </record>  

        <!--  Form view for Quality Check HA        -->
        <record model="ir.ui.view" id="view_prakruti_quality_check_ha_form">
            <field name="name">Quality Check HA</field>
            <field name="model">prakruti.quality_check_ha</field>
            <field name="arch" type="xml">
                <form string="Quality Check HA" create= "false">
                    <header position="inside">
                        <button name="update_to_dispatch" string="Done" type="object"  attrs="{'invisible':[('state','in',('done'))]}"/>
                        <field name='state' widget='statusbar'/>
                    </header>
                    <group colspan="4" col="4">
                        <field name='qc_date' attrs="{'readonly':[('state','in',('done'))]}"/>
                        <field name='dispatch_no' />
                        <field name='dispatch_date' />
                        <field name="company_id" readonly="True"/>
                        <field name='checked_by' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state','in',('done'))]}"/>
                        <field name='order_no'/>
                        <field name="order_date"/>
                        <field name="dispatch_to" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>      
                        <field name='dispatch_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" readonly="True"/>  
                        <field name='order_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="True"/>
                        <field name='requested_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="True"/>
                        <field name='quotation_id'  options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" invisible="True"/>
                        <field name= "coming_from" invisible="True"/>
                    </group>
                    <notebook>
                        <page string='Product Details'>
                            <field name='qc_check_line' attrs="{'readonly':[('state','in',('done'))]}"/>
                        </page> 
                        <page  string="Product Wise Batch List">
                            <field name='batch_line'>
                                <tree string="Product Wise Batch List" editable='bottom' create="false">
                                    <field name="product_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                    <field name="uom_id" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" />
                                    <field name="batch_no" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"/>
                                    <field name='specification_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="['&amp;',('product_id','=',product_id),'|',('specification_sale_status','=',True),('common_specification','=',True)]"/>
                                    <field name='ar_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  domain="[('specification_id','=',specification_id)]"/> 
                                    <field name="dispatched_qty" />
                                    <field name='batch_size'/>
                                    <field name='batch_qty'/>
                                    <field name='packing_details'/>
                                    <field name="remarks" />
                                </tree>
                            </field>
                        </page>
                        <page string='Other details'>
                            <group name = 'details' string = 'QC Information'/>
                            <group colspan= "4" col= "4">
                                <field name='reference_no' attrs="{'readonly':[('state','in',('done'))]}"/>
                                <field name= "store_incharge" options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state','in',('done'))]}"/>
                                <field name= 'quality_incharge' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state','in',('done'))]}"/>
                                <field name='remarks'/>
                                <field name='terms' attrs="{'readonly':[('state','in',('done'))]}"/> 
                                <field name='reference_date' attrs="{'readonly':[('state','in',('done'))]}"/>
                                <field name='revision_no' attrs="{'readonly':[('state','in',('done'))]}"/>
                            </group>
                        </page>
                    </notebook>
                </form>
            </field>
        </record>

        
    <!--  Tree view for Quality Check HA    -->
     <record model="ir.ui.view" id="view_prakruti_quality_check_line_ha_tree">
         <field name="name">prakruti.quality_check_line_ha.tree</field>
         <field name="model">prakruti.quality_check_line_ha</field>
         <field name="arch" type="xml">
            <tree editable='bottom' create= "false" delete= "false">
                <field name='product_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state','in',('draft'))]}"/>
                <field name='uom_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" attrs="{'readonly':[('state','in',('draft'))]}"/>
                <field name='description' attrs="{'readonly':[('state','in',('draft'))]}"/>
                <field name='specification_id' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}" domain="['&amp;',('product_id','=',product_id),'|',('specification_sale_status','=',True),('common_specification','=',True)]" invisible = "1"/>
                <field name='ar_no' options="{'no_create': True, 'no_open': True, 'no_create_edit' : True}"  domain="[('specification_id','=',specification_id)]" invisible = "1"/> 
                <field name="batch_list"/> 
                <field name="batch_no" invisible = "True"/>
                <field name='ordered_qty' attrs="{'readonly':[('state','in',('draft'))]}"/>
                <field name='dispatched_qty' attrs="{'readonly':[('state','in',('draft'))]}"/>
                <field name="accepted_qty" />
                <field name="rejected_qty" />
                <field name="status" />
                <field name="test_result"/>
                <field name='remarks'/>
                <field name="qc_flag" invisible="True"/>
                <field name='state' invisible="True"/>
                <field name='dispatch_line_grid_id' invisible="True"/>
            </tree>
         </field>
     </record>
        <!--  Pivot for Quality Check HA        -->
     <record model="ir.ui.view" id="view_prakruti_quality_check_ha_pivot">
            <field name="name">prakruti.quality_check_ha.pivot</field>
            <field name="model">prakruti.quality_check_ha</field>
            <field name="arch" type="xml">
                <pivot string="Quality Check HA" display_quantity="True">
                    <field name="checked_by" type="row"/>
                    <field name="state"/>
                </pivot>
            </field>
        </record>
        <!-- Action for Quality Check HA         -->
        <record model="ir.actions.act_window" id="prakruti_quality_check_ha_action">
            <field name="name">Quality Check HA</field>
            <field name="res_model">prakruti.quality_check_ha</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form,pivot</field>
        </record>
        
        <menuitem sequence="2" 
                  name="Outward Quality Control HA" 
                  id="prakruti_qc_ha_menu" 
                  action="prakruti_quality_check_ha_action" 
                  parent="prakruti_qc_menu" groups="prakruti.group_prakruti_quality_check_ha_read_only,prakruti.group_prakruti_quality_check_ha_edit,prakruti.group_prakruti_quality_check_ha_create,prakruti.group_prakruti_quality_check_ha_delete"/>
        
    </data>
</openerp>